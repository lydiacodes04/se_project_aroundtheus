!function(){"use strict";const e={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save",inactiveButtonClass:"modal__save_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"};class t{constructor(e,t,s){this.name=e.name,this.link=e.link,this._cardSelector=t,this._handleImageClick=s}_setEventListeners(){this._likeButton=this._cardElement.querySelector(".card__like-button"),this._likeButton.addEventListener("click",this._handleLikeButton),this._cardElement.querySelector(".card__trash-button").addEventListener("click",(()=>{this._handleDeleteCard()})),this._cardImageEl.addEventListener("click",(()=>{this._handleImageClick(this)}))}_handleLikeButton=()=>{this._likeButton.classList.toggle("card__like-button_active")};_handleDeleteCard(){this._cardElement.remove(),this._element=null}getView(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardTitleEl=this._cardElement.querySelector(".card__title"),this._cardImageEl=this._cardElement.querySelector(".card__image"),this._cardImageEl.src=this.link,this._cardImageEl.alt=this.name,this._cardTitleEl.textContent=this.name,this._setEventListeners(),this._cardElement}}class s{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t,this._inputEls=[...this._formEl.querySelectorAll(this._inputSelector)],this._submitButton=this._formEl.querySelector(this._submitButtonSelector)}_showInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_hideInputError(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.classList.remove(this._errorClass),t.textContent=""}_checkInputValidity(e){this._inputEls.forEach((e=>{e.addEventListener("input",(e=>this._checkInputValidity(e.target)))})),e.validity.valid?this._hideInputError(e):this._showInputError(e)}handleDisableButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}_handleEnableButton(){this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1}_hasInvalidInput(){return!this._inputEls.every((e=>e.validity.valid))}toggleButtonState(){this._hasInvalidInput(this._inputEls)?this.handleDisableButton():this._handleEnableButton()}_setEventListeners(){this.toggleButtonState(),this._inputEls.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this.toggleButtonState()}))}))}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}resetValidation(){this.toggleButtonState(),this._inputEls.forEach((e=>{this._hideError(e)}))}}class n{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._closeButton=this._popupElement.querySelector(".modal__close"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._closeButton.addEventListener("click",(()=>{this.close()})),this._popupElement.addEventListener("click",(e=>{e.target===this._popupElement&&this.close()}))}}class i extends n{constructor(e,t){super({popupSelector:e}),this._popupForm=this._popupElement.querySelector(".modal__form"),this._handleFormSubmit=t,this._submitButton=this._popupElement.querySelector(".modal__save")}_getInputValues(){this._inputElements=this._popupForm.querySelectorAll(".modal__input");const e={};return this._inputElements.forEach((t=>{e[t.name]=t.value})),e}reset(){this._popupForm.reset()}setEventListeners(){this._popupForm.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues())})),super.setEventListeners()}}const o=document.forms["profile-edit-modal-form"],r=document.querySelector("#add-card-form"),a=document.querySelector(".profile__edit-button"),l=document.querySelector(".profile__add-button"),c=document.querySelector(".modal__image-element"),u=document.querySelector(".modal__image-caption"),d=document.querySelector("#profile-title-input"),m=document.querySelector("#profile-description-input");function _(e){v.open(e)}function h(e){return new t(e,"#card-template",_).getView()}a.addEventListener("click",(()=>{const e=S.getUserInfo();d.value=e.name,m.value=e.about,f.open()})),l.addEventListener("click",(()=>{g.open()})),new s(e,o).enableValidation();const p=new s(e,r);p.enableValidation();const E=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.reverse().forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"}],renderer:e=>{const t=h(e);E.addItem(t)}},".cards__list");E.renderItems();const v=new class extends n{constructor(e){super({popupSelector:e}),this._previewImageElement=this._popupElement.querySelector(".modal__image-element"),this._previewImageElementTitle=this._popupElement.querySelector(".modal__image-caption")}open(e){this._previewImageElement.src=e.link,this._previewImageElement.alt=e.name,this._previewImageElementTitle.textContent=e.name,super.open()}}("#image-preview-modal",{previewImageElement:c,previewImageElementTitle:u});v.setEventListeners();const g=new i("#add-card-modal",(function(e){const{name:t,link:s}=e,n=h({name:t,link:s});E.addItem(n),g.close(),g.reset(),p.handleDisableButton()}));g.setEventListeners();const S=new class{constructor(e,t){this._name=document.querySelector(e),this._about=document.querySelector(t)}getUserInfo(){return{name:this._name.textContent,about:this._about.textContent}}setUserInfo(e,t){this._name.textContent=e,this._about.textContent=t}}(".profile__title",".profile__description"),f=new i("#profile-edit-modal",(function(e){S.setUserInfo(e.name,e.about),f.close()}));f.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFdBQUFBLENBQVl0SCxFQUFNaUcsR0FDaEJsRyxLQUFLcUgsTUFBTTdGLFlBQWN2QixFQUN6QkQsS0FBS3NILE9BQU85RixZQUFjMEUsQ0FDNUIsR0htRjRCLGtCQUFtQix5QkFFM0NDLEVBQW1CLElBQUl6QixFQUMzQix1QkFyRUYsU0FBaUNPLEdBQy9CZSxFQUFTdUIsWUFBWXRDLEVBQVloRixLQUFNZ0YsRUFBWWlCLE9BQ25EQyxFQUFpQjdCLE9BQ25CLElBcUVBNkIsRUFBaUIxQixtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9wcmFjdGljdW0vLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3ByYWN0aWN1bS8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vcHJhY3RpY3VtLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcbiAgZm9ybVNlbGVjdG9yOiBcIi5tb2RhbF9fZm9ybVwiLFxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmVfZGlzYWJsZWRcIixcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcbn07XG5cbmV4cG9ydCBjb25zdCBpbml0aWFsQ2FyZHMgPSBbXG4gIHtcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcbiAgfSxcbiAge1xuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFrZS1sb3Vpc2UuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xhdGVtYXIuanBnXCIsXG4gIH0sXG4gIHtcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC92YW5vaXNlLmpwZ1wiLFxuICB9LFxuICB7XG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYWdvLmpwZ1wiLFxuICB9LFxuXTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIENhcmQge1xuICBjb25zdHJ1Y3RvcihkYXRhLCBjYXJkU2VsZWN0b3IsIGhhbmRsZUltYWdlQ2xpY2spIHtcbiAgICB0aGlzLm5hbWUgPSBkYXRhLm5hbWU7XG4gICAgdGhpcy5saW5rID0gZGF0YS5saW5rO1xuXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xuICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sgPSBoYW5kbGVJbWFnZUNsaWNrO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xuXG4gICAgdGhpcy5fbGlrZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbik7XG5cbiAgICB0aGlzLl9jYXJkRWxlbWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdHJhc2gtYnV0dG9uXCIpXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCgpO1xuICAgICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzKTtcbiAgICB9KTtcbiAgfVxuXG4gIF9oYW5kbGVMaWtlQnV0dG9uID0gKCkgPT4ge1xuICAgIHRoaXMuX2xpa2VCdXR0b24uY2xhc3NMaXN0LnRvZ2dsZShcImNhcmRfX2xpa2UtYnV0dG9uX2FjdGl2ZVwiKTtcbiAgfTtcblxuICBfaGFuZGxlRGVsZXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5yZW1vdmUoKTtcbiAgICB0aGlzLl9lbGVtZW50ID0gbnVsbDtcbiAgfVxuXG4gIGdldFZpZXcoKSB7XG4gICAgdGhpcy5fY2FyZEVsZW1lbnQgPSBkb2N1bWVudFxuICAgICAgLnF1ZXJ5U2VsZWN0b3IodGhpcy5fY2FyZFNlbGVjdG9yKVxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xuXG4gICAgdGhpcy5fY2FyZFRpdGxlRWwgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xuICAgIHRoaXMuX2NhcmRJbWFnZUVsID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbC5zcmMgPSB0aGlzLmxpbms7XG4gICAgdGhpcy5fY2FyZEltYWdlRWwuYWx0ID0gdGhpcy5uYW1lO1xuICAgIHRoaXMuX2NhcmRUaXRsZUVsLnRleHRDb250ZW50ID0gdGhpcy5uYW1lO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbCkge1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gY29uZmlnLnN1Ym1pdEJ1dHRvblNlbGVjdG9yO1xuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBjb25maWcuZXJyb3JDbGFzcztcbiAgICB0aGlzLl9mb3JtRWwgPSBmb3JtRWw7XG4gICAgdGhpcy5faW5wdXRFbHMgPSBbLi4udGhpcy5fZm9ybUVsLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbiA9IHRoaXMuX2Zvcm1FbC5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgfVxuXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7XG4gICAgZXJyb3JNZXNzYWdlRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTtcbiAgfVxuXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsKSB7XG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcbiAgICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcbiAgICBlcnJvck1lc3NhZ2VFbC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpO1xuICAgIGVycm9yTWVzc2FnZUVsLnRleHRDb250ZW50ID0gXCJcIjtcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbCkge1xuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldmVudCkgPT5cbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGV2ZW50LnRhcmdldClcbiAgICAgICk7XG4gICAgfSk7XG4gICAgaWYgKCFpbnB1dEVsLnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbCk7XG4gICAgfVxuICB9XG5cbiAgaGFuZGxlRGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LmFkZCh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgX2hhbmRsZUVuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcbiAgfVxuXG4gIF9oYXNJbnZhbGlkSW5wdXQoKSB7XG4gICAgcmV0dXJuICF0aGlzLl9pbnB1dEVscy5ldmVyeSgoaW5wdXRFbCkgPT4gaW5wdXRFbC52YWxpZGl0eS52YWxpZCk7XG4gIH1cblxuICB0b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBpZiAodGhpcy5faGFzSW52YWxpZElucHV0KHRoaXMuX2lucHV0RWxzKSkge1xuICAgICAgdGhpcy5oYW5kbGVEaXNhYmxlQnV0dG9uKCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX2hhbmRsZUVuYWJsZUJ1dHRvbigpO1xuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIHRoaXMuX2lucHV0RWxzLmZvckVhY2goKGlucHV0RWwpID0+IHtcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChldnQpID0+IHtcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xuICAgICAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fZm9ybUVsLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLnRvZ2dsZUJ1dHRvblN0YXRlKCk7XG4gICAgdGhpcy5faW5wdXRFbHMuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XG4gICAgICB0aGlzLl9oaWRlRXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgICB9KTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2xvc2VCdXR0b24gPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2VcIik7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgb3BlbigpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jbG9zZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XG4gICAgICBpZiAoZXZ0LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XG4gICAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGhhbmRsZUZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmVcIik7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yQWxsKFwiLm1vZGFsX19pbnB1dFwiKTtcbiAgICBjb25zdCBpbnB1dFZhbHVlcyA9IHt9O1xuXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dEVsLm5hbWVdID0gaW5wdXRFbC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICByZXNldCgpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQodGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKSk7XG4gICAgfSk7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxufVxuIiwiaW1wb3J0IHsgY29uZmlnLCBpbml0aWFsQ2FyZHMgfSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcbmltcG9ydCBTZWN0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1NlY3Rpb24uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5cbi8vRk9STVNcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybSA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZS1lZGl0LW1vZGFsLWZvcm1cIl07XG5jb25zdCBhZGRDYXJkRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtZm9ybVwiKTtcblxuLy9NQUlOIFBBR0UgQlVUVE9OU1xuY29uc3QgcHJvZmlsZUVkaXRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xuY29uc3QgYWRkTmV3Q2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcblxuLy9QUkVWSUVXIElNQUdFIEVMXG5jb25zdCBwcmV2aWV3SW1hZ2VFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2UtZWxlbWVudFwiKTtcbmNvbnN0IHByZXZpZXdJbWFnZUVsZW1lbnRUaXRsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLm1vZGFsX19pbWFnZS1jYXB0aW9uXCJcbik7XG4vL3Byb2ZpbGUgaW5wdXRzXG5jb25zdCBwcm9maWxlVGl0bGVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjcHJvZmlsZS10aXRsZS1pbnB1dFwiKTtcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcbiAgXCIjcHJvZmlsZS1kZXNjcmlwdGlvbi1pbnB1dFwiXG4pO1xuXG4vL0VWRU5UIEhBTkRMRVJTXG5mdW5jdGlvbiBoYW5kbGVJbWFnZUNsaWNrKGRhdGEpIHtcbiAgcG9wdXBJbWFnZS5vcGVuKGRhdGEpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdChpbnB1dFZhbHVlcykge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyhpbnB1dFZhbHVlcy5uYW1lLCBpbnB1dFZhbHVlcy5hYm91dCk7XG4gIHByb2ZpbGVFZGl0UG9wdXAuY2xvc2UoKTtcbn1cblxuLy8gLy9FVkVOVCBMSVNURU5FUlNcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIGNvbnN0IGRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xuICBwcm9maWxlVGl0bGVJbnB1dC52YWx1ZSA9IGRhdGEubmFtZTtcbiAgcHJvZmlsZURlc2NyaXB0aW9uSW5wdXQudmFsdWUgPSBkYXRhLmFib3V0O1xuICBwcm9maWxlRWRpdFBvcHVwLm9wZW4oKTtcbn0pO1xuXG5hZGROZXdDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIG5ld0NhcmRQb3B1cC5vcGVuKCk7XG59KTtcblxuLy8gZnVuY3Rpb25zXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChjYXJkRGF0YSwgXCIjY2FyZC10ZW1wbGF0ZVwiLCBoYW5kbGVJbWFnZUNsaWNrKTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkLmdldFZpZXcoKTtcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xufVxuXG5mdW5jdGlvbiBoYW5kbGVBZGRDYXJkRm9ybVN1Ym1pdChkYXRhKSB7XG4gIGNvbnN0IHsgbmFtZSwgbGluayB9ID0gZGF0YTtcbiAgY29uc3QgY2FyZERhdGEgPSB7IG5hbWU6IG5hbWUsIGxpbms6IGxpbmsgfTtcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgc2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgbmV3Q2FyZFBvcHVwLmNsb3NlKCk7XG4gIG5ld0NhcmRQb3B1cC5yZXNldCgpO1xuICBhZGRDYXJkRm9ybVZhbGlkYXRvci5oYW5kbGVEaXNhYmxlQnV0dG9uKCk7XG59XG5cbi8vaW5zdGFudGlhdGlvbnNcbmNvbnN0IHByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgcHJvZmlsZUVkaXRGb3JtKTtcbnByb2ZpbGVFZGl0Rm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IGFkZENhcmRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3IoY29uZmlnLCBhZGRDYXJkRm9ybSk7XG5hZGRDYXJkRm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG5cbmNvbnN0IHNlY3Rpb24gPSBuZXcgU2VjdGlvbihcbiAge1xuICAgIGl0ZW1zOiBpbml0aWFsQ2FyZHMsXG4gICAgcmVuZGVyZXI6IChjYXJkRGF0YSkgPT4ge1xuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGNhcmREYXRhKTtcbiAgICAgIHNlY3Rpb24uYWRkSXRlbShjYXJkRWxlbWVudCk7XG4gICAgfSxcbiAgfSxcbiAgXCIuY2FyZHNfX2xpc3RcIlxuKTtcblxuc2VjdGlvbi5yZW5kZXJJdGVtcygpO1xuXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKFwiI2ltYWdlLXByZXZpZXctbW9kYWxcIiwge1xuICBwcmV2aWV3SW1hZ2VFbGVtZW50LFxuICBwcmV2aWV3SW1hZ2VFbGVtZW50VGl0bGUsXG59KTtcbnBvcHVwSW1hZ2Uuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgbmV3Q2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI2FkZC1jYXJkLW1vZGFsXCIsXG4gIGhhbmRsZUFkZENhcmRGb3JtU3VibWl0XG4pO1xubmV3Q2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKFwiLnByb2ZpbGVfX3RpdGxlXCIsIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xuXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIFwiI3Byb2ZpbGUtZWRpdC1tb2RhbFwiLFxuICBoYW5kbGVQcm9maWxlRWRpdFN1Ym1pdFxuKTtcbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjbGFzc1NlbGVjdG9yKSB7XG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY2xhc3NTZWxlY3Rvcik7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtcy5yZXZlcnNlKCkuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7XG4gICAgfSk7XG4gIH1cblxuICBhZGRJdGVtKGl0ZW0pIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChpdGVtKTtcbiAgfVxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKSB7XG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsZW1lbnQgPSB0aGlzLl9wb3B1cEVsZW1lbnQucXVlcnlTZWxlY3RvcihcbiAgICAgIFwiLm1vZGFsX19pbWFnZS1lbGVtZW50XCJcbiAgICApO1xuICAgIHRoaXMuX3ByZXZpZXdJbWFnZUVsZW1lbnRUaXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxuICAgICAgXCIubW9kYWxfX2ltYWdlLWNhcHRpb25cIlxuICAgICk7XG4gIH1cblxuICBvcGVuKGRhdGEpIHtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50LnNyYyA9IGRhdGEubGluaztcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50LmFsdCA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9wcmV2aWV3SW1hZ2VFbGVtZW50VGl0bGUudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBVc2VySW5mbyB7XG4gIGNvbnN0cnVjdG9yKG5hbWUsIGFib3V0KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZSk7XG4gICAgdGhpcy5fYWJvdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGFib3V0KTtcbiAgfVxuXG4gIGdldFVzZXJJbmZvKCkge1xuICAgIHJldHVybiB7XG4gICAgICBuYW1lOiB0aGlzLl9uYW1lLnRleHRDb250ZW50LFxuICAgICAgYWJvdXQ6IHRoaXMuX2Fib3V0LnRleHRDb250ZW50LFxuICAgIH07XG4gIH1cblxuICBzZXRVc2VySW5mbyhuYW1lLCBhYm91dCkge1xuICAgIHRoaXMuX25hbWUudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2Fib3V0LnRleHRDb250ZW50ID0gYWJvdXQ7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJjb25maWciLCJmb3JtU2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIkNhcmQiLCJjb25zdHJ1Y3RvciIsImRhdGEiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwidGhpcyIsIm5hbWUiLCJsaW5rIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJfY2FyZEVsZW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiYWRkRXZlbnRMaXN0ZW5lciIsIl9oYW5kbGVMaWtlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfY2FyZEltYWdlRWwiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJyZW1vdmUiLCJfZWxlbWVudCIsImdldFZpZXciLCJkb2N1bWVudCIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfY2FyZFRpdGxlRWwiLCJzcmMiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJmb3JtRWwiLCJfZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJfc3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtRWwiLCJfaW5wdXRFbHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3N1Ym1pdEJ1dHRvbiIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWwiLCJlcnJvck1lc3NhZ2VFbCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiZm9yRWFjaCIsImV2ZW50IiwidGFyZ2V0IiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhbmRsZURpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9oYW5kbGVFbmFibGVCdXR0b24iLCJfaGFzSW52YWxpZElucHV0IiwiZXZlcnkiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImV2dCIsImVuYWJsZVZhbGlkYXRpb24iLCJwcmV2ZW50RGVmYXVsdCIsInJlc2V0VmFsaWRhdGlvbiIsImlucHV0RWxlbWVudCIsIl9oaWRlRXJyb3IiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsIl9jbG9zZUJ1dHRvbiIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX3BvcHVwRm9ybSIsIl9oYW5kbGVGb3JtU3VibWl0IiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0RWxlbWVudHMiLCJpbnB1dFZhbHVlcyIsInZhbHVlIiwicmVzZXQiLCJwcm9maWxlRWRpdEZvcm0iLCJmb3JtcyIsImFkZENhcmRGb3JtIiwicHJvZmlsZUVkaXRCdXR0b24iLCJhZGROZXdDYXJkQnV0dG9uIiwicHJldmlld0ltYWdlRWxlbWVudCIsInByZXZpZXdJbWFnZUVsZW1lbnRUaXRsZSIsInByb2ZpbGVUaXRsZUlucHV0IiwicHJvZmlsZURlc2NyaXB0aW9uSW5wdXQiLCJwb3B1cEltYWdlIiwiY3JlYXRlQ2FyZCIsImNhcmREYXRhIiwidXNlckluZm8iLCJnZXRVc2VySW5mbyIsImFib3V0IiwicHJvZmlsZUVkaXRQb3B1cCIsIm5ld0NhcmRQb3B1cCIsImFkZENhcmRGb3JtVmFsaWRhdG9yIiwic2VjdGlvbiIsImNsYXNzU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJlbmRlckl0ZW1zIiwicmV2ZXJzZSIsIml0ZW0iLCJhZGRJdGVtIiwicHJlcGVuZCIsImNhcmRFbGVtZW50IiwiX3ByZXZpZXdJbWFnZUVsZW1lbnQiLCJfcHJldmlld0ltYWdlRWxlbWVudFRpdGxlIiwiX25hbWUiLCJfYWJvdXQiLCJzZXRVc2VySW5mbyJdLCJzb3VyY2VSb290IjoiIn0=